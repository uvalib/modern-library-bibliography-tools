---
layout: page-layout.njk
prefetch:
  - /booksIndex.json
  - /revisionsIndex.json
  - /yearsIndex.json
---


<!--
<uvalib-faceted-search-browse></uvalib-faceted-search-browse>
-->

<div class="years-group">
  {% for year in years %}
  <sl-details class="year" summary="{{ year.year }}">
    <h2><a href="{{ '/year/' | url }}{{ year.year }}.html">{{ year.title }}</a></h2>
    {% if year.generalFirst %}
      {% markdown year.generalFirst %}
    {% else %}
      {% markdown year.general %}  
    {% endif %}
     <a href="{{ '/year/' | url }}{{ year.year }}.html">[more]</a>
    <ul>
    {% for bookID, book in year.books %}
      <li><a href="/book/{{ bookID }}.html">{{ bookID }} {{ book.title }}</a>
      <ul>
        {% for rev in revisions %}
          {% if rev.book == bookID %}
            <li><a href="{{ '/revision/' | url }}{{ rev.id }}.html">{{ rev.id }}</a></li>
          {% endif %}
        {% endfor %}
      </ul>
      </li>
    {% endfor %}
    </ul>
  </sl-details>
  {% endfor %}
</div>

<script>window.lunr = {};</script>

<!--
<script type="module" src="{{ '/js/search.js' | url }}"></script>
-->

<script>
  const container = document.querySelector('.years-group');

  // Close all other details when one is shown
  container.addEventListener('sl-show', event => {
    [...container.querySelectorAll('sl-details.year')].map(details => (details.open = event.target === details));
  });
</script>

<style>
  .years-group sl-details.year:not(:last-of-type) {
    margin-bottom: var(--sl-spacing-2x-small);
  }
</style>