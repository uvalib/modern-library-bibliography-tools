---
layout: home-layout.njk
prefetch:
  - /booksIndex.json
  - /revisionsIndex.json
  - /yearsIndex.json
---

<img src="/images/ml-title-imge.jpg" style="width:100%"/>
<!--
<uvalib-faceted-search-browse></uvalib-faceted-search-browse>
-->

<div id="content">
<h2>By Year</h2>
<div class="years-group">
  {% for year in years %}
  <sl-details class="year" summary="{{ year.year }}">
    <h2><a href="{{ '/year/' | url }}{{ year.year }}.html">{{ year.title }}</a></h2>
    {% if year.generalFirst %}
      {% markdown year.generalFirst %}
    {% elif year.general %}
      {% markdown year.general %}  
    {% endif %}
     <a href="{{ '/year/' | url }}{{ year.year }}.html">[more]</a>
    <ul>
    {% for bookID, bk in year.books %}
      {% for book in books %}
        {% if book.id == bookID %}
          <li><a href="/book/{{ bookID }}.html">{{ book.title }}</a>
          <ul>
            {% for rev in revisions %}
              {% if rev.book == bookID %}
                <li><a href="{{ '/revision/' | url }}{{ rev.id }}.html">{{ rev.title }}</a></li>
              {% endif %}
            {% endfor %}
          </ul>
          </li>
        {% endif %}
      {% endfor %}
    {% endfor %}
    </ul>
  </sl-details>
  {% endfor %}
</div>
</div>

<script>window.lunr = {};</script>

<!--
<script type="module" src="{{ '/js/search.js' | url }}"></script>
-->

<script>
  const container = document.querySelector('.years-group');

  // Close all other details when one is shown
  container.addEventListener('sl-show', event => {
    [...container.querySelectorAll('sl-details.year')].map(details => (details.open = event.target === details));
  });
</script>

<style>
  .years-group sl-details.year:not(:last-of-type) {
    margin-bottom: var(--sl-spacing-2x-small);
  }
</style>